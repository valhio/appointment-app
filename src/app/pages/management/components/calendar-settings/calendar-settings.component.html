
<div class="flex items-center justify-center px-4 pb-2">
    <div class="max-w-4xl w-full shadow-lg">
        <div class="md:p-4 p-1 dark:bg-gray-800 bg-white rounded-t">
            <app-calendar-header [currentDate]="selectedDate$ | async" (navigateNext)="onNavigateNextMonth()"
                (navigatePrevious)="onNavigatePreviousMonth()"></app-calendar-header>
            <app-management-calendar-body [calendarMatrix]="calendar" [selectedDate]="selectedDate$ | async"
                (showBookingHoursEvent)="onShowBookingHours($event)"
                (changeSelectedDate)="onChangeSelectedDate($event)"></app-management-calendar-body>
        </div>
        <app-management-booking-hours [dayData$]="currentDateData$" [currentDate]="selectedDate$ | async"
            [showBookingHours]="showBookingHours" (changes)="onChanges()"></app-management-booking-hours>
    </div>
</div>

<ng-container *ngIf="bookingsForSelectedDate$ | async as bookings">
    <ng-container *ngFor="let booking of bookings">
        <div class="md:flex md:justify-between m-4">
            <div>
                <p>Име: {{booking.firstName}} {{booking.lastName}}</p>
                <p>Телефон: {{booking.phone}}</p>
                <p>Регистрационен номер: {{booking.registrationNumber}}</p>
                <p>Категория: {{booking.vehicleCategory}}</p>
                <p>Услуга: {{booking.bookingType}}</p>
                <p>Час: {{booking.bookingTime}}</p>
                <!-- <p>Резервацията е направена на: {{booking.data.createdAt.toDate() | date :'dd-MM-yyyy MM:ss'}}</p> -->
            </div>
            <div class="flex justify-center">
                <button type="button" *ngIf="selectedDate$ | async as selected"
                    class="block my-4 p-8 max-h-10 mx-1 border border-gray-300 font-medium rounded-lg text-xs md:text-sm py-2.5 'bg-white text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200'"
                    (click)="updateBookingDialog(booking.bookingTime, booking)">Update</button>
                <button type="button" *ngIf="selectedDate$ | async as selected"
                    class="block my-4 p-8 max-h-10 mx-1 border border-gray-300 font-medium rounded-lg text-xs md:text-sm py-2.5 'bg-white text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200'"
                    (click)="deleteBooking(selected,booking.bookingTime)">Delete</button>
            </div>
        </div>
        <hr class="h-px my-4 bg-gray-200 border-0 dark:bg-gray-700">
    </ng-container>
</ng-container>